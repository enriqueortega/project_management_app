/*! project_management_app 2016-03-13 */
function createProject(){sprintsArray=[],positionFilled=0,clientLogicFilled=!1,frontEndFilled=!1,serverLogicFilled=!1,frontEndScrum=randomFrontEndPoints(),clientsideScrum=randomClientPoints(),serverScrum=randomServerPoints(),$(".projectContainer").empty(),$(".projectContainer").append("<h2>"+randomCompanyGenerator()+"</h2>"),$(".projectContainer").append("<ul><li>Front-End Scrum Points: "+frontEndScrum+"</li><li>Clientside Scrum Points: "+clientsideScrum+"</li><li>Serverside Scrum Points: "+serverScrum+"</li></ul>"),$(".projectContainer").append('<button class=" btn-danger assignStaff">Assign Staff</button>')}function randomFrontEndPoints(){return randomNumber(10,maxFrontEndPoints)}function randomClientPoints(){return randomNumber(10,maxClientPoints)}function randomServerPoints(){return randomNumber(10,maxServerPoints)}function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}function assignStaff(){$.ajax({type:"GET",url:"/staff",success:function(a){staff.name=a.name,staff.skill=a.skill,staff.sprint=a.sprint,matchSkills(staff)}})}function matchSkills(a){if("Clientside Logic"==a.skill&&clientLogicFilled===!1&&($(".projectContainer").append('<div class="clientside-container"></div>'),$(".clientside-container").append("<h2>"+a.name+"</h2>"),$(".clientside-container").append("<p>Skill: "+a.skill+"</p>"),$(".clientside-container").append("<p>Average Sprints: "+a.sprint+"</p>"),$(".clientside-container").append('<p class="clientside-completion">Sprints till completion: '+Math.ceil(clientsideScrum/a.sprint)+"</p>"),$(".clientside-completion").data("sprints",Math.ceil(clientsideScrum/a.sprint)),console.log($(".clientside-completion").data()),sprintsArray.push($(".clientside-completion").data("sprints")),clientLogicFilled=!0,console.log(a.skill,"filled!"),positionFilled++),"Front End"==a.skill&&frontEndFilled===!1&&($(".projectContainer").append('<div class="frontend-container"></div>'),$(".frontend-container").append("<h2>"+a.name+"</h2>"),$(".frontend-container").append("<p>Skill: "+a.skill+"</p>"),$(".frontend-container").append("<p>Average Sprints: "+a.sprint+"</p>"),$(".frontend-container").append('<p class="frontend-completion">Sprints till completion: '+Math.ceil(frontEndScrum/a.sprint)+"</p>"),$(".frontend-completion").data("sprints",Math.ceil(frontEndScrum/a.sprint)),sprintsArray.push($(".frontend-completion").data("sprints")),frontEndFilled=!0,console.log(a.skill,"filled!"),positionFilled++),"Serverside Logic"==a.skill&&serverLogicFilled===!1&&($(".projectContainer").append('<div class="serverside-container"></div>'),$(".serverside-container").append("<h2>"+a.name+"</h2>"),$(".serverside-container").append("<p>Skill: "+a.skill+"</p>"),$(".serverside-container").append("<p>Average Sprints: "+a.sprint+"</p>"),$(".serverside-container").append('<p class="serverside-completion">Sprints till completion: '+Math.ceil(serverScrum/a.sprint)+"</p>"),$(".serverside-completion").data("sprints",Math.ceil(serverScrum/a.sprint)),sprintsArray.push($(".serverside-completion").data("sprints")),serverLogicFilled=!0,console.log(a.skill,"filled!"),positionFilled++),3>positionFilled&&(a={},assignStaff()),3==positionFilled){for(var b=0;b<sprintsArray.length;b++)totalSprints+=sprintsArray[b];$(".projectContainer").children(".assignStaff").after("<p>Weeks until completion: "+Math.max.apply(null,sprintsArray)+"</p>"),console.log(totalSprints),console.log(sprintsArray)}}var randomCompany=["Sub Prime Academy","The Nerdlierery","Code 402","Target Practice","Software For Better"],staff={},maxFrontEndPoints=60,maxClientPoints=60,maxServerPoints=60,clientLogicFilled=!1,frontEndFilled=!1,serverLogicFilled=!1,positionFilled=0,frontEndScrum=0,clientsideScrum=0,serverScrum=0,sprintsArray=[],totalSprints=0;$(document).ready(function(){$(".container").prepend('<button class="generate btn-info">Generate Project</button>'),$("body").on("click",".generate",createProject),$(".projectContainer").on("click","button",assignStaff)});var randomCompanyGenerator=function(){return randomCompany[randomNumber(0,randomCompany.length-1)]};